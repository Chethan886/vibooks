// // import React from 'react';
// // import { Link } from 'react-router-dom';

// // export default function Cards(props) {
// //   return (
// //     <div className='m-5'>
// //     <div className='container'>
// //     <div className='row'>
// //     <div className='col-md-3 mb-4' >

// //       <div className="card h-100" >
// //   <img src="https://www.junkybooks.com/administrator/bookimages/63e17210ac0f04.85515883.jpg" className="card-img-top" alt="Error 404 Image not found"/>
// //   <div className="card-body">
// //     <h5 className="card-title">Secrets Of Reverse Engineering</h5>
// //     <p className="card-text">Author: Eldad Eilam</p>
// //     <Link to="/dub" className="btn btn-info">Read now</Link>
// //   </div>
// //   </div>
// // </div>
// //     <div className='col-md-3 mb-4'>

// //       <div className="card h-100">
// //   <img src="https://www.junkybooks.com/administrator/bookimages/63f29543977be8.91759659.jpg" className="card-img-top" alt="Error 404 Image not found"/>
// //   <div className="card-body">
// //     <h5 className="card-title">Signals And Systems - Electrical Engineering</h5>
// //     <p className="card-text"> Author: Luis S Chaparro</p>
// //     <Link to="/sin" className="btn btn-info">Read now</Link>
// //   </div>
// //   </div>
// // </div>
// //     <div className='col-md-3 mb-4'>

// //       <div className="card h-100">
// //   <img src="https://www.junkybooks.com/administrator/bookimages/63550a2570e868.29227663.jpg"className="card-img-top" alt="Error 404 Image not found"/>
// //   <div className="card-body">
// //     <h5 className="card-title">Mathematics For Finance: Introduction </h5>
// //     <p className="card-text">Author:Marek Capenski</p>
// //     <Link to="/nep" className="btn btn-info">Read now</Link>
// //   </div>
// //   </div>
// // </div>
// //     <div className='col-md-3 mb-4'>

// //       <div className="card h-100">
// //   <img src="https://www.junkybooks.com/administrator/bookimages/62fa47929f3177.75901826.jpg" className="card-img-top" alt="Error 404 Image not found"/>
// //   <div className="card-body">
// //     <h5 className="card-title">The Alchemist:Introduction to alchemy</h5>
// //     <p className="card-text">Author: Paulo Coelho</p>
// //     <Link to="/ked" className="btn btn-info">Read now</Link>
// //   </div>
// //   </div>
// // </div>
// //     <div className='col-md-3 mb-4'>

// //       <div className="card h-100">
// //       <img src="https://www.junkybooks.com/administrator/bookimages/64090849c0d293.73828885.jpg" className="card-img-top" alt="Error 404 Image not found"/>
// //   <div className="card-body">
// //     <h5 className="card-title">An Introduction To Mathematics</h5>
// //     <p className="card-text">Author: Junkybooks</p>
// //     <Link to="/ked" className="btn btn-info">Read now</Link>
// //   </div>
// //   </div>
// // </div>
// //     <div className='col-md-3 mb-4'>

// //       <div className="card h-100">
// //       <img src="https://www.junkybooks.com/administrator/bookimages/644599e3001414.84971677.jpg" className="card-img-top" alt="Error 404 Image not found"/>
// //   <div className="card-body">
// //     <h5 className="card-title">Energy Project and Financing:Introduction</h5>
// //     <p className="card-text">Author: Junkybooks</p>
// //     <Link to="/ked" className="btn btn-info">Read now</Link>
// //   </div>
// //   </div>
// // </div>
// //     <div className='col-md-3 mb-4'>

// //       <div className="card h-100">
// //       <img src="https://www.junkybooks.com/administrator/bookimages/643c48ae418404.34724952.jpg" className="card-img-top" alt="Error 404 Image not found"/>
// //   <div className="card-body">
// //     <h5 className="card-title">Cities And Climate Change:Intro</h5>
// //     <p className="card-text">Author: Junkybooks</p>
// //     <Link to="/ked" className="btn btn-info">Read now</Link>
// //   </div>
// //   </div>
// // </div>
// //     <div className='col-md-3 mb-4'>

// //       <div className="card h-100">
// //       <img src="https://www.junkybooks.com/administrator/bookimages/6421fa1ce2e7b0.13728778.jpg" className="card-img-top" alt="Error 404 Image not found"/>
// //   <div className="card-body">
// //     <h5 className="card-title">Analytical Chemistry:Introduction</h5>
// //     <p className="card-text">Author: D.Kealey</p>
// //     <Link to="/ked" className="btn btn-info">Read now</Link>
// //   </div>
// //   </div>
// // </div>
// //     <div className='col-md-3 mb-4'>

// //       <div className="card h-100">
// //       <img src="https://www.junkybooks.com/administrator/bookimages/640e31e7133f90.44323362.jpg" className="card-img-top" alt="Error 404 Image not found"/>
// //   <div className="card-body">
// //     <h5 className="card-title">A History Of Mathematics From Mesopotamia</h5>
// //     <p className="card-text">Author: Luke Hodking </p>
// //     <Link to="/ked" className="btn btn-info">Read now</Link>
// //   </div>
// //   </div>
// // </div>
// //     <div className='col-md-3 mb-4'>

// //       <div className="card h-100">
// //       <img src="https://www.junkybooks.com/administrator/bookimages/6400f5c1486de6.74144936.jpg" className="card-img-top" alt="Error 404 Image not found"/>
// //   <div className="card-body">
// //     <h5 className="card-title">Stephen Hawking:The Grand Design</h5>
// //     <p className="card-text">Author: Junkybooks</p>
// //     <Link to="/ked" className="btn btn-info">Read now</Link>
// //   </div>
// //   </div>
// // </div>
// //     <div className='col-md-3 mb-4'>

// //       <div className="card h-100">
// //       <img src="https://www.junkybooks.com/administrator/bookimages/6400f37bc4e3f1.72371049.jpg" className="card-img-top" alt="Error 404 Image not found"/>
// //   <div className="card-body">
// //     <h5 className="card-title">Fundamentals Of Probability And Statistics For Engineers</h5>
// //     <p className="card-text">Author: T T Soong</p>
// //     <Link to="/ked" className="btn btn-info">Read now</Link>
// //   </div>
// //   </div>
// // </div>
// //     <div className='col-md-3 mb-4'>

// //       <div className="card h-100">
// //       <img src="https://www.junkybooks.com/administrator/bookimages/63f686e50bee28.54330045.jpg" className="card-img-top" alt="Error 404 Image not found"/>
// //   <div className="card-body">
// //     <h5 className="card-title">The BMW Active Hybrid 5 Owner's Manual</h5>
// //     <p className="card-text">Author: JunkyBooks</p>
// //     <Link to="/ked" className="btn btn-info">Read now</Link>
// //   </div>
// //   </div>
// // </div>
// // </div>
// // </div>

// //     </div>
// //   )
// // }
// import React, { useState } from 'react';
// import { Link } from 'react-router-dom';

// export default function Cards(props) {
//   const [selectedGenre, setSelectedGenre] = useState('All');
//   const [searchQuery, setSearchQuery] = useState('');
//   const genres = ['All', 'Mystery', 'Science Fiction', 'Romance']; 
  

//   const books = [
//     {
//       id: 1,
//       title: 'One Piece',
//       author: 'Eiichiro Oda',
//       image: 'https://w0.peakpx.com/wallpaper/309/233/HD-wallpaper-monkey-d-luffy-mugivara-luffy-strawhat-luffy-king-of-pirates-one-piece-anime.jpg',
//       genre: 'Fantasy'
//     },
//     {
//       id: 2,
//       title: 'Dragon Ball',
//       author: 'Akira Toriyama',
//       image: 'https://w0.peakpx.com/wallpaper/866/615/HD-wallpaper-goku-ani-anime-ball-black-blue-dbz-dragon-dragon-ball-super-ultra.jpg',
//       genre: 'Fantasy',
//     },
//     {
//       id: 3,
//       title: 'Haikyuu',
//       author: 'Haruichi Furudate',
//       image: 'https://w0.peakpx.com/wallpaper/165/156/HD-wallpaper-k%C5%8Dtar%C5%8D-bokuto-haikyuu-fukurodani.jpg',
//       genre: 'Mystery',
//     },
//     {
//       id: 4,
//       title: 'Secrets Of Reverse Engineering',
//       author: 'Eldad Eilam',
//       image: 'https://www.junkybooks.com/administrator/bookimages/63e17210ac0f04.85515883.jpg',
//       genre: 'Science Fiction',
//     },
//     {
//       id: 5,
//       title: 'Harry Potter',
//       author: 'J.K. Rowling',
//       image: 'https://w0.peakpx.com/wallpaper/135/982/HD-wallpaper-hogwarts-legacy-harry-harry-potter-potter.jpg',
//       genre: 'Science Fiction',
     
//     },
//     {
//       id: 6,
//       title: 'Demon slayer',
//       author: 'Koyoharu Gotouge',
//       image: 'https://w0.peakpx.com/wallpaper/899/977/HD-wallpaper-kyojuro-rengoku-demon-demon-slayer-kimetsu-kimetsu-no-yaiba-season-2-slayer-yaiba.jpg',
//       genre: 'Mystery',
//     },
//     {
//       id: 7,
//       title: 'Your Lie in April"  ',
//       author: 'Naoshi Arakawa',
//       image: 'https://w0.peakpx.com/wallpaper/674/480/HD-wallpaper-your-lie-in-april-anime-anime.jpg',
//       genre: 'Romance',
//     },
//     {
//       id: 8,
//       title: 'Solo Leveling',
//       author: 'Chugong',
//       image: 'https://w0.peakpx.com/wallpaper/575/128/HD-wallpaper-solo-leveling-anime-cool-manga-solo-leveling.jpg',
//       genre: 'Science Fiction',
//     },
//     {
//       id: 9,
//       title: 'Your Name',
//       author: 'Makoto Shinkai',
//       image: 'https://w0.peakpx.com/wallpaper/869/808/HD-wallpaper-your-name-animated-anime-japan-movies.jpg',
//       genre: 'Romance',
//     },
//     {
//       id: 10,
//       title: 'Black Clover',
//       author: 'YÅ«ki Tabata',
//       image: 'https://w0.peakpx.com/wallpaper/959/977/HD-wallpaper-blackclover-asta-5-leaf-clover-asta-black-clover-asta-demon-black-clover-demon-asta.jpg',
//       genre: 'Mystery',
//     },
//     {
//       id: 11,
//       title: 'Highschool DxD',
//       author: 'Ichiei Ishibumi',
//       // image: 'https://w0.peakpx.com/wallpaper/694/661/HD-wallpaper-highschool-dxd-great-anime-one-of-my-top-10.jpg',
//       image:'https://w0.peakpx.com/wallpaper/705/508/HD-wallpaper-high-school-dxd-gremory-rias-toujou-koneko-himejima-akeno-argento-asia-hyoudou-issei.jpg',
//       genre: 'Romance',
//     },
//     {
//       id: 12,
//       title: 'Arcane:League of legends',
//       author: 'JunkyBooks',
//       image: 'https://e0.pxfuel.com/wallpapers/12/335/desktop-wallpaper-vi-arcane.jpg',
//       genre: 'Romance',
//     },
   
//   ];

//   const filteredBooks = books.filter(book => {
//     const matchesGenre = selectedGenre === 'All' || book.genre === selectedGenre;
//     const lowerCaseSearchQuery = searchQuery.toLowerCase();
//     const matchesTitle = book.title.toLowerCase().includes(lowerCaseSearchQuery);
//     const matchesAuthor = book.author.toLowerCase().includes(lowerCaseSearchQuery);
//     return matchesGenre && (matchesTitle || matchesAuthor);
//   });

//   return (
//     <div className='m-5'>
//       <div className='container'>
//         <div className='row'>
//           <div className='col-md-12 mb-4'>
//             {/* Search input */}
//             <input
//               type='text'
//               placeholder='Search by title or author...'
//               value={searchQuery}
//               onChange={(e) => setSearchQuery(e.target.value)}
//             />
//             {/* Filter buttons */}
//             {genres.map(genre => (
//               <button
//                 key={genre}
//                 className={`btn btn-${selectedGenre === genre ? 'primary' : 'secondary'}`}
//                 onClick={() => setSelectedGenre(genre)}
//               >
//                 {genre}
//               </button>
//             ))}
//           </div>
//           {filteredBooks.map(book => (
//             <div key={book.id} className='col-md-3 mb-4'>
//               <div className='card h-100'>
//                 <img src={book.image} className='image' alt='Book Cover' />
//                 <div className='card-body'>
//                   <h5 className='card-title'>{book.title}</h5>
//                   <p className='card-text'>Author: {book.author}<br></br>Genre:{book.genre}</p>
//                   <Link to="/dub" className="btn btn-info">Read now</Link>
//                 </div>
//               </div>
//             </div>
//           ))}
//         </div>
//       </div>
//     </div>
//   );
// }



// import React, { useState, useEffect } from 'react';
// import axios from 'axios';
//  import { Link } from 'react-router-dom';

// const Cards = () => {
//   const [books, setBooks] = useState([]);
//   const [selectedGenre, setSelectedGenre] = useState('All');
//   const [searchQuery, setSearchQuery] = useState('');

//   useEffect(() => {
//     // Fetch books from your server's API endpoint (e.g., /api/books)
//     const fetchBooks = async () => {
//       try {
//         const response = await axios.get('http://localhost:3000/api/books');
//         setBooks(response.data);
//       } catch (error) {
//         console.error(error);
//       }
//     };

//     fetchBooks();
//   }, []);

//   // Filter the books based on selectedGenre and searchQuery
//   const filteredBooks = books.filter((book) => {
//     const matchesGenre = selectedGenre === 'All' || book.genre === selectedGenre;
//     const lowerCaseSearchQuery = searchQuery.toLowerCase();
//     const matchesTitle = book.title.toLowerCase().includes(lowerCaseSearchQuery);
//     const matchesAuthor = book.author.toLowerCase().includes(lowerCaseSearchQuery);
//     return matchesGenre && (matchesTitle || matchesAuthor);
//   });

//   return (
//     <div className="container">
//       <div className="row">
//         <div className="col-md-12 mb-4">
//           {/* Search input */}
//           <input
//             type="text"
//             placeholder="Search by title or author..."
//             value={searchQuery}
//             onChange={(e) => setSearchQuery(e.target.value)}
//             className="form-control"
//           />
//           {/* Filter buttons */}
//           {['All', 'Mystery', 'Science Fiction', 'Romance'].map((genre) => (
//             <button
//               key={genre}
//               className={`btn btn-${selectedGenre === genre ? 'primary' : 'secondary'} mx-2`}
//               onClick={() => setSelectedGenre(genre)}
//             >
//               {genre}
//             </button>
//           ))}
//         </div>
//         {filteredBooks.map((book) => (
//           <div key={book._id} className="col-md-3 mb-4">
//             <div className="card h-100">
//               <img src={book.imageUrl} className="image" alt={book.title} />
//               <div className="card-body">
//                 <h5 className="card-title">{book.title}</h5>
//                 <p className="card-text">Author: {book.author}</p>
//                 <p className="card-text">Genre: {book.genre}</p>
//                 <Link to="/dub" className="btn btn-info">Read now</Link>
//               </div>
//             </div>
//           </div>
//         ))}
//       </div>
//     </div>
//   );
// };

// export default Cards;

import React, { useState, useEffect } from 'react';
import axios from 'axios';
import { Link } from 'react-router-dom';

const Cards = () => {
  const [books, setBooks] = useState([]);
  const [selectedGenre, setSelectedGenre] = useState('All');
  const [searchQuery, setSearchQuery] = useState('');
  const [updateFormData, setUpdateFormData] = useState({
    title: '',
    author: '',
    imageUrl: '',
    description: '',
    genre: '',
  });

  useEffect(() => {
    // Fetch books from your server's API endpoint (e.g., /api/books)
    const fetchBooks = async () => {
      try {
        const response = await axios.get('http://localhost:3000/api/books');
        setBooks(response.data);
      } catch (error) {
        console.error(error);
      }
    };

    fetchBooks();
  }, []);

  const handleDeleteBook = async (bookId) => {
    try {
      // Send a DELETE request to delete the book by its ID
      await axios.delete(`http://localhost:3000/api/books/${bookId}`);

      // After successful deletion, update the list of books on the client-side
      setBooks((prevBooks) => prevBooks.filter((book) => book._id !== bookId));
    } catch (error) {
      console.error(error);
    }
  };

  const handleUpdateFormDataChange = (e) => {
    const { name, value } = e.target;
    setUpdateFormData({ ...updateFormData, [name]: value });
  };

  const handleUpdateBook = async (bookId) => {
    try {
      // Send a PUT request to update the book by its ID with the updated data
      await axios.put(`http://localhost:3000/api/books/${bookId}`, updateFormData);

      // After successful update, reload the list of books
      const response = await axios.get('http://localhost:3000/api/books');
      setBooks(response.data);

      // Clear the update form data
      setUpdateFormData({
        title: '',
        author: '',
        imageUrl: '',
        description: '',
        genre: '',
      });
    } catch (error) {
      console.error(error);
    }
  };

  // Filter the books based on selectedGenre and searchQuery
  const filteredBooks = books.filter((book) => {
    const matchesGenre = selectedGenre === 'All' || book.genre === selectedGenre;
    const lowerCaseSearchQuery = searchQuery.toLowerCase();
    const matchesTitle = book.title.toLowerCase().includes(lowerCaseSearchQuery);
    const matchesAuthor = book.author.toLowerCase().includes(lowerCaseSearchQuery);
    return matchesGenre && (matchesTitle || matchesAuthor);
  });

  return (
    <div className="container">
      <div className="row">
        <div className="col-md-12 mb-4">
          {/* Search input */}
          <input
            type="text"
            placeholder="Search by title or author..."
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            className="form-control"
          />
          {/* Filter buttons */}
          {['All', 'Mystery', 'Science Fiction', 'Romance', 'Fantasy'].map((genre) => (
            <button
              key={genre}
              className={`btn btn-${selectedGenre === genre ? 'primary' : 'secondary'} mx-2`}
              onClick={() => setSelectedGenre(genre)}
            >
              {genre}
            </button>
          ))}
        </div>
        {filteredBooks.map((book) => (
          <div key={book._id} className="col-md-3 mb-4">
            <div className="card h-100">
              {/* Kebab menu in the top-right corner */}
              <div className="kebab-menu">
                <div className="dropdown">
                  <button
                    className="btn btn-secondary dropdown-toggle"
                    type="button"
                    id={`kebab-menu-${book._id}`}
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    ...
                  </button>
                  <ul className="dropdown-menu dropdown-menu-end" aria-labelledby={`kebab-menu-${book._id}`}>
                    <li>
                      <div className="update-book-form">
                        <form onSubmit={() => handleUpdateBook(book._id)}>
                          <div className="mb-3">
                            <input
                              type="text"
                              className="form-control"
                              placeholder="Title"
                              name="title"
                              value={updateFormData.title}
                              onChange={handleUpdateFormDataChange}
                            />
                          </div>
                          <div className="mb-3">
                            <input
                              type="text"
                              className="form-control"
                              placeholder="Author"
                              name="author"
                              value={updateFormData.author}
                              onChange={handleUpdateFormDataChange}
                            />
                          </div>
                          <div className="mb-3">
                            <input
                              type="text"
                              className="form-control"
                              placeholder="Image URL"
                              name="imageUrl"
                              value={updateFormData.imageUrl}
                              onChange={handleUpdateFormDataChange}
                            />
                          </div>
                          <div className="mb-3">
                            <textarea
                              className="form-control"
                              placeholder="Description"
                              name="description"
                              value={updateFormData.description}
                              onChange={handleUpdateFormDataChange}
                            />
                          </div>
                          <div className="mb-3">
                            <input
                              type="text"
                              className="form-control"
                              placeholder="Genre"
                              name="genre"
                              value={updateFormData.genre}
                              onChange={handleUpdateFormDataChange}
                            />
                          </div>
                          <button type="submit" className="btn btn-primary">Update Book</button>
                        </form>
                      </div>
                    </li>
                    <li>
                      <button
                        className="btn btn-warning"
                        onClick={() => handleDeleteBook(book._id)}
                      >
                        Delete
                      </button>
                    </li>
                  </ul>
                </div>
              </div>
              {/* Card content */}
              <img src={book.imageUrl} className="image" alt={book.title} />
              <div className="card-body">
                <h5 className="card-title">{book.title}</h5>
                <p className="card-text">Author: {book.author}</p>
                <p className="card-text">Genre: {book.genre}</p>
                <Link to="/dub" className="btn btn-info">Read now</Link>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  );
};

export default Cards;




